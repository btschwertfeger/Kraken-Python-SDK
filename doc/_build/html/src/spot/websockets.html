<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Spot Websockets &mdash; python-kraken-sdk  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Futures REST" href="../futures/rest.html" />
    <link rel="prev" title="Spot REST" href="rest.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            python-kraken-sdk
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/rest_example_usage.html">Usage Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/trading_bot_templates.html">Trading Bot Templates</a></li>
<li class="toctree-l1"><a class="reference internal" href="rest.html">Spot REST</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Spot Websockets</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV2"><code class="docutils literal notranslate"><span class="pre">KrakenSpotWSClientV2</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV2.active_private_subscriptions"><code class="docutils literal notranslate"><span class="pre">KrakenSpotWSClientV2.active_private_subscriptions</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV2.active_public_subscriptions"><code class="docutils literal notranslate"><span class="pre">KrakenSpotWSClientV2.active_public_subscriptions</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV2.get_ws_token"><code class="docutils literal notranslate"><span class="pre">KrakenSpotWSClientV2.get_ws_token()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV2.on_message"><code class="docutils literal notranslate"><span class="pre">KrakenSpotWSClientV2.on_message()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV2.private_channel_names"><code class="docutils literal notranslate"><span class="pre">KrakenSpotWSClientV2.private_channel_names</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV2.private_methods"><code class="docutils literal notranslate"><span class="pre">KrakenSpotWSClientV2.private_methods</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV2.public_channel_names"><code class="docutils literal notranslate"><span class="pre">KrakenSpotWSClientV2.public_channel_names</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV2.return_unique_id"><code class="docutils literal notranslate"><span class="pre">KrakenSpotWSClientV2.return_unique_id</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV2.send_message"><code class="docutils literal notranslate"><span class="pre">KrakenSpotWSClientV2.send_message()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV2.subscribe"><code class="docutils literal notranslate"><span class="pre">KrakenSpotWSClientV2.subscribe()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV2.unsubscribe"><code class="docutils literal notranslate"><span class="pre">KrakenSpotWSClientV2.unsubscribe()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV1"><code class="docutils literal notranslate"><span class="pre">KrakenSpotWSClientV1</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV1.active_private_subscriptions"><code class="docutils literal notranslate"><span class="pre">KrakenSpotWSClientV1.active_private_subscriptions</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV1.active_public_subscriptions"><code class="docutils literal notranslate"><span class="pre">KrakenSpotWSClientV1.active_public_subscriptions</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV1.cancel_all_orders"><code class="docutils literal notranslate"><span class="pre">KrakenSpotWSClientV1.cancel_all_orders()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV1.cancel_all_orders_after"><code class="docutils literal notranslate"><span class="pre">KrakenSpotWSClientV1.cancel_all_orders_after()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV1.cancel_order"><code class="docutils literal notranslate"><span class="pre">KrakenSpotWSClientV1.cancel_order()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV1.create_order"><code class="docutils literal notranslate"><span class="pre">KrakenSpotWSClientV1.create_order()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV1.edit_order"><code class="docutils literal notranslate"><span class="pre">KrakenSpotWSClientV1.edit_order()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV1.get_ws_token"><code class="docutils literal notranslate"><span class="pre">KrakenSpotWSClientV1.get_ws_token()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV1.on_message"><code class="docutils literal notranslate"><span class="pre">KrakenSpotWSClientV1.on_message()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV1.private_channel_names"><code class="docutils literal notranslate"><span class="pre">KrakenSpotWSClientV1.private_channel_names</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV1.public_channel_names"><code class="docutils literal notranslate"><span class="pre">KrakenSpotWSClientV1.public_channel_names</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV1.return_unique_id"><code class="docutils literal notranslate"><span class="pre">KrakenSpotWSClientV1.return_unique_id</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV1.send_message"><code class="docutils literal notranslate"><span class="pre">KrakenSpotWSClientV1.send_message()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV1.subscribe"><code class="docutils literal notranslate"><span class="pre">KrakenSpotWSClientV1.subscribe()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV1.unsubscribe"><code class="docutils literal notranslate"><span class="pre">KrakenSpotWSClientV1.unsubscribe()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#kraken.spot.OrderbookClientV2"><code class="docutils literal notranslate"><span class="pre">OrderbookClientV2</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.OrderbookClientV2.add_book"><code class="docutils literal notranslate"><span class="pre">OrderbookClientV2.add_book()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.OrderbookClientV2.depth"><code class="docutils literal notranslate"><span class="pre">OrderbookClientV2.depth</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.OrderbookClientV2.exception_occur"><code class="docutils literal notranslate"><span class="pre">OrderbookClientV2.exception_occur</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.OrderbookClientV2.get"><code class="docutils literal notranslate"><span class="pre">OrderbookClientV2.get()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.OrderbookClientV2.get_first"><code class="docutils literal notranslate"><span class="pre">OrderbookClientV2.get_first()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.OrderbookClientV2.on_book_update"><code class="docutils literal notranslate"><span class="pre">OrderbookClientV2.on_book_update()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.OrderbookClientV2.on_message"><code class="docutils literal notranslate"><span class="pre">OrderbookClientV2.on_message()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.OrderbookClientV2.remove_book"><code class="docutils literal notranslate"><span class="pre">OrderbookClientV2.remove_book()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#kraken.spot.OrderbookClientV1"><code class="docutils literal notranslate"><span class="pre">OrderbookClientV1</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.OrderbookClientV1.add_book"><code class="docutils literal notranslate"><span class="pre">OrderbookClientV1.add_book()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.OrderbookClientV1.depth"><code class="docutils literal notranslate"><span class="pre">OrderbookClientV1.depth</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.OrderbookClientV1.exception_occur"><code class="docutils literal notranslate"><span class="pre">OrderbookClientV1.exception_occur</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.OrderbookClientV1.get"><code class="docutils literal notranslate"><span class="pre">OrderbookClientV1.get()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.OrderbookClientV1.get_first"><code class="docutils literal notranslate"><span class="pre">OrderbookClientV1.get_first()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.OrderbookClientV1.on_book_update"><code class="docutils literal notranslate"><span class="pre">OrderbookClientV1.on_book_update()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.OrderbookClientV1.on_message"><code class="docutils literal notranslate"><span class="pre">OrderbookClientV1.on_message()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kraken.spot.OrderbookClientV1.remove_book"><code class="docutils literal notranslate"><span class="pre">OrderbookClientV1.remove_book()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../futures/rest.html">Futures REST</a></li>
<li class="toctree-l1"><a class="reference internal" href="../futures/websockets.html">Futures Websockets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../base_api/base_api.html">Base Clients and Internals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exceptions/exceptions.html">Custom Exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../issues.html">Known Issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/license.html">License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">python-kraken-sdk</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Spot Websockets</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/btschwertfeger/python-kraken-sdk/blob/master/docs/src/spot/websockets.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="spot-websockets">
<h1>Spot Websockets<a class="headerlink" href="#spot-websockets" title="Link to this heading"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="kraken.spot.KrakenSpotWSClientV2">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kraken.spot.</span></span><span class="sig-name descname"><span class="pre">KrakenSpotWSClientV2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">secret</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_public</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.spot.KrakenSpotWSClientV2" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="../base_api/base_api.html#kraken.spot.websocket.KrakenSpotWSClientBase" title="kraken.spot.websocket.KrakenSpotWSClientBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">KrakenSpotWSClientBase</span></code></a></p>
<p><strong>This client only supports the Kraken Websocket API v2.</strong></p>
<p>Class to access public and private/authenticated websocket connections.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.kraken.com/websockets-v2">https://docs.kraken.com/websockets-v2</a></p></li>
</ul>
<p>… please use <a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV1" title="kraken.spot.KrakenSpotWSClientV1"><code class="xref py py-class docutils literal notranslate"><span class="pre">kraken.spot.KrakenSpotWSClientV1</span></code></a> for accessing the
Kraken’s Websocket API v1.</p>
<p>This class holds up to two websocket connections, one private and one
public. The core functionalities are un-/subscribing to websocket feeds and
sending messages. See <a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV2.subscribe" title="kraken.spot.KrakenSpotWSClientV2.subscribe"><code class="xref py py-func docutils literal notranslate"><span class="pre">kraken.spot.KrakenSpotWSClientV2.subscribe()</span></code></a> and
<a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV2.send_message" title="kraken.spot.KrakenSpotWSClientV2.send_message"><code class="xref py py-func docutils literal notranslate"><span class="pre">kraken.spot.KrakenSpotWSClientV2.send_message()</span></code></a> for more information.</p>
<p>When accessing private endpoints that need authentication make sure, that
the <code class="docutils literal notranslate"><span class="pre">Access</span> <span class="pre">WebSockets</span> <span class="pre">API</span></code> API key permission is set in the user’s
account. To place or cancel orders, querying ledger information or accessing
live portfolio changes (fills, new orders, …) there are separate
permissions that must be enabled if required.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em><em>, </em><em>optional</em>) – API Key for the Kraken Spot API (default: <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>)</p></li>
<li><p><strong>secret</strong> (<em>str</em><em>, </em><em>optional</em>) – Secret API Key for the Kraken Spot API (default: <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>)</p></li>
<li><p><strong>url</strong> (<em>str</em><em>, </em><em>optional</em>) – Set a specific URL to access the Kraken REST API</p></li>
<li><p><strong>no_public</strong> – Disables public connection (default: <code class="docutils literal notranslate"><span class="pre">False</span></code>). If not
set or set to <code class="docutils literal notranslate"><span class="pre">False</span></code>, the client will create a public and a private
connection per default. If only a private connection is required, this
parameter should be set to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><strong>beta</strong> (<em>bool</em>) – Use the beta websocket channels (maybe not supported anymore,
default: <code class="docutils literal notranslate"><span class="pre">False</span></code>)</p></li>
</ul>
</dd>
</dl>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">HowTo: Use the Kraken Spot websocket client (v2)</span><a class="headerlink" href="#id1" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">kraken.spot</span> <span class="kn">import</span> <span class="n">KrakenSpotWSClientV2</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="k">class</span> <span class="nc">Client</span><span class="p">(</span><span class="n">KrakenSpotWSClientV2</span><span class="p">):</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">on_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
<span class="linenos"> 8</span>        <span class="nb">print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="linenos">12</span>
<span class="linenos">13</span>    <span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>         <span class="c1"># unauthenticated</span>
<span class="linenos">14</span>    <span class="n">client_auth</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span>     <span class="c1"># authenticated</span>
<span class="linenos">15</span>        <span class="n">key</span><span class="o">=</span><span class="s2">&quot;kraken-api-key&quot;</span><span class="p">,</span>
<span class="linenos">16</span>        <span class="n">secret</span><span class="o">=</span><span class="s2">&quot;kraken-secret-key&quot;</span>
<span class="linenos">17</span>    <span class="p">)</span>
<span class="linenos">18</span>
<span class="linenos">19</span>    <span class="c1"># subscribe to the desired feeds:</span>
<span class="linenos">20</span>    <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span>
<span class="linenos">21</span>        <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;channel&quot;</span><span class="p">:</span> <span class="s2">&quot;ticker&quot;</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;BTC/USD&quot;</span><span class="p">]}</span>
<span class="linenos">22</span>    <span class="p">)</span>
<span class="linenos">23</span>    <span class="c1"># from now on the on_message function receives the ticker feed</span>
<span class="linenos">24</span>
<span class="linenos">25</span>    <span class="k">while</span> <span class="ow">not</span> <span class="n">client</span><span class="o">.</span><span class="n">exception_occur</span><span class="p">:</span>
<span class="linenos">26</span>        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="linenos">27</span>
<span class="linenos">28</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="linenos">29</span>    <span class="k">try</span><span class="p">:</span>
<span class="linenos">30</span>        <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
<span class="linenos">31</span>    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
<span class="linenos">32</span>        <span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">HowTo: Use the websocket client (v2) as instance</span><a class="headerlink" href="#id2" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">kraken.spot</span> <span class="kn">import</span> <span class="n">KrakenSpotWSClientV2</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="linenos"> 6</span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">on_message</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
<span class="linenos"> 7</span>        <span class="nb">print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span>    <span class="n">client</span> <span class="o">=</span> <span class="n">KrakenSpotWSClientV2</span><span class="p">(</span><span class="n">callback</span><span class="o">=</span><span class="n">on_message</span><span class="p">)</span>
<span class="linenos">10</span>    <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span>
<span class="linenos">11</span>        <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;channel&quot;</span><span class="p">:</span> <span class="s2">&quot;ticker&quot;</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;BTC/USD&quot;</span><span class="p">]}</span>
<span class="linenos">12</span>    <span class="p">)</span>
<span class="linenos">13</span>
<span class="linenos">14</span>    <span class="k">while</span> <span class="ow">not</span> <span class="n">client</span><span class="o">.</span><span class="n">exception_occur</span><span class="p">:</span>
<span class="linenos">15</span>        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="linenos">16</span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="linenos">19</span>    <span class="k">try</span><span class="p">:</span>
<span class="linenos">20</span>        <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
<span class="linenos">21</span>    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
<span class="linenos">22</span>        <span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">HowTo: Use the websocket client (v2) as context manager</span><a class="headerlink" href="#id3" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">kraken.spot</span> <span class="kn">import</span> <span class="n">KrakenSpotWSClientV2</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="k">async</span> <span class="k">def</span> <span class="nf">on_message</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
<span class="linenos"> 5</span>    <span class="nb">print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="linenos"> 8</span>    <span class="k">async</span> <span class="k">with</span> <span class="n">KrakenSpotWSClientV2</span><span class="p">(</span>
<span class="linenos"> 9</span>        <span class="n">key</span><span class="o">=</span><span class="s2">&quot;api-key&quot;</span><span class="p">,</span>
<span class="linenos">10</span>        <span class="n">secret</span><span class="o">=</span><span class="s2">&quot;secret-key&quot;</span><span class="p">,</span>
<span class="linenos">11</span>        <span class="n">callback</span><span class="o">=</span><span class="n">on_message</span>
<span class="linenos">12</span>    <span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
<span class="linenos">13</span>        <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span>
<span class="linenos">14</span>            <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;channel&quot;</span><span class="p">:</span> <span class="s2">&quot;ticker&quot;</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;BTC/USD&quot;</span><span class="p">]}</span>
<span class="linenos">15</span>        <span class="p">)</span>
<span class="linenos">16</span>
<span class="linenos">17</span>    <span class="k">while</span> <span class="kc">True</span>
<span class="linenos">18</span>        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="linenos">19</span>
<span class="linenos">20</span>
<span class="linenos">21</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="linenos">22</span>    <span class="k">try</span><span class="p">:</span>
<span class="linenos">23</span>        <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
<span class="linenos">24</span>    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
<span class="linenos">25</span>        <span class="k">pass</span>
</pre></div>
</div>
</div>
<dl class="py property">
<dt class="sig sig-object py" id="kraken.spot.KrakenSpotWSClientV2.active_private_subscriptions">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">active_private_subscriptions</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Any</span></em><a class="headerlink" href="#kraken.spot.KrakenSpotWSClientV2.active_private_subscriptions" title="Link to this definition"></a></dt>
<dd><p>Returns the active private subscriptions</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>List of active private subscriptions</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>list[dict] | Any</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ConnectionError</strong> – If there is no active private connection</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="kraken.spot.KrakenSpotWSClientV2.active_public_subscriptions">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">active_public_subscriptions</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Any</span></em><a class="headerlink" href="#kraken.spot.KrakenSpotWSClientV2.active_public_subscriptions" title="Link to this definition"></a></dt>
<dd><p>Returns the active public subscriptions</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>List of active public subscriptions</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>list[dict] | Any</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ConnectionError</strong> – If there is no active public connection.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.spot.KrakenSpotWSClientV2.get_ws_token">
<span class="sig-name descname"><span class="pre">get_ws_token</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="headerlink" href="#kraken.spot.KrakenSpotWSClientV2.get_ws_token" title="Link to this definition"></a></dt>
<dd><p>Get the authentication token to establish the authenticated
websocket connection. This is used internally and in most cases not
needed outside.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.kraken.com/rest/#tag/Websockets-Authentication">https://docs.kraken.com/rest/#tag/Websockets-Authentication</a></p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The authentication token</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.spot.KrakenSpotWSClientV2.on_message">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">on_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">list</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#kraken.spot.KrakenSpotWSClientV2.on_message" title="Link to this definition"></a></dt>
<dd><p>Calls the defined callback function (if defined). In most cases you
have to overwrite this function since it will receive all incoming
messages that will be sent by Kraken.</p>
<p>See <a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV1" title="kraken.spot.KrakenSpotWSClientV1"><code class="xref py py-class docutils literal notranslate"><span class="pre">kraken.spot.KrakenSpotWSClientV1</span></code></a> and
<a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV2" title="kraken.spot.KrakenSpotWSClientV2"><code class="xref py py-class docutils literal notranslate"><span class="pre">kraken.spot.KrakenSpotWSClientV2</span></code></a> for examples to use this
function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>message</strong> (<em>dict</em><em> | </em><em>list</em>) – The message received sent by Kraken via the websocket connection</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="kraken.spot.KrakenSpotWSClientV2.private_channel_names">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">private_channel_names</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#kraken.spot.KrakenSpotWSClientV2.private_channel_names" title="Link to this definition"></a></dt>
<dd><p>Returns the list of valid values for <code class="docutils literal notranslate"><span class="pre">channel</span></code> when un-/subscribing
from/to private feeds that need authentication.</p>
<p>See <a class="reference external" href="https://docs.kraken.com/websockets-v2/#channels">https://docs.kraken.com/websockets-v2/#channels</a> for all channels.</p>
<p>Currently there is only one private channel (June 2023):</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.kraken.com/websockets-v2/#executions">executions</a></p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>List of available private channel names</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="kraken.spot.KrakenSpotWSClientV2.private_methods">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">private_methods</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#kraken.spot.KrakenSpotWSClientV2.private_methods" title="Link to this definition"></a></dt>
<dd><p>Returns the list of available methods - parameters are  similar to the
REST API trade methods.</p>
<p>The available methods and their documentation are listed below (as of
June 2023):</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.kraken.com/websockets-v2/#add-order">add_order</a></p></li>
<li><p><a class="reference external" href="https://docs.kraken.com/websockets-v2/#batch-add">batch_order</a></p></li>
<li><p><a class="reference external" href="https://docs.kraken.com/websockets-v2/#batch-cancel">batch_cancel</a></p></li>
<li><p><a class="reference external" href="https://docs.kraken.com/websockets-v2/#cancel-all-orders">cancel_all</a></p></li>
<li><p><a class="reference external" href="https://docs.kraken.com/websockets-v2/#cancel-all-orders-after">cancel_all_orders_after</a></p></li>
<li><p><a class="reference external" href="https://docs.kraken.com/websockets-v2/#cancel-order">cancel_order</a></p></li>
<li><p><a class="reference external" href="https://docs.kraken.com/websockets-v2/#edit-order">edit_order</a></p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>List of available methods</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="kraken.spot.KrakenSpotWSClientV2.public_channel_names">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">public_channel_names</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#kraken.spot.KrakenSpotWSClientV2.public_channel_names" title="Link to this definition"></a></dt>
<dd><p>Returns the list of valid values for <code class="docutils literal notranslate"><span class="pre">channel</span></code> when un-/subscribing
from/to public feeds without authentication.</p>
<p>See <a class="reference external" href="https://docs.kraken.com/websockets-v2/#channels">https://docs.kraken.com/websockets-v2/#channels</a> for all channels.</p>
<p>The available public channels are listed below:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.kraken.com/websockets-v2/#book">book</a></p></li>
<li><p><a class="reference external" href="https://docs.kraken.com/websockets-v2/#instrument">instrument</a></p></li>
<li><p><a class="reference external" href="https://docs.kraken.com/websockets-v2/#open-high-low-and-close-ohlc">ohlc</a></p></li>
<li><p><a class="reference external" href="https://docs.kraken.com/websockets-v2/#ticker">ticker</a></p></li>
<li><p><a class="reference external" href="https://docs.kraken.com/websockets-v2/#trade">trade</a></p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>List of available public channel names</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="kraken.spot.KrakenSpotWSClientV2.return_unique_id">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">return_unique_id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#kraken.spot.KrakenSpotWSClientV2.return_unique_id" title="Link to this definition"></a></dt>
<dd><p>Returns a unique uuid string</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>uuid</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.spot.KrakenSpotWSClientV2.send_message">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">send_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#kraken.spot.KrakenSpotWSClientV2.send_message" title="Link to this definition"></a></dt>
<dd><p>Sends a message via the websocket connection. For private messages
the authentication token will be assigned automatically if
<code class="docutils literal notranslate"><span class="pre">raw=False</span></code>.</p>
<p>The user can specify a <code class="docutils literal notranslate"><span class="pre">req_d</span></code> within the message to identify
corresponding responses via websocket feed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>message</strong> (<em>dict</em>) – The information to send</p></li>
<li><p><strong>raw</strong> (<em>bool</em><em>, </em><em>optional</em>) – If set to <code class="docutils literal notranslate"><span class="pre">True</span></code> the <code class="docutils literal notranslate"><span class="pre">message</span></code> will be sent directly.</p></li>
</ul>
</dd>
</dl>
<p>The following examples demonstrate how to use the
<a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV2.send_message" title="kraken.spot.KrakenSpotWSClientV2.send_message"><code class="xref py py-func docutils literal notranslate"><span class="pre">kraken.spot.KrakenSpotWSClientV2.send_message()</span></code></a> function. The
client must be instantiated as described in
<a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV2" title="kraken.spot.KrakenSpotWSClientV2"><code class="xref py py-class docutils literal notranslate"><span class="pre">kraken.spot.KrakenSpotWSClientV2</span></code></a> where <code class="docutils literal notranslate"><span class="pre">client</span></code> uses
public connections (without authentication) and <code class="docutils literal notranslate"><span class="pre">client_auth</span></code> must
be instantiated using valid credentials since only this way placing or
canceling orders can be done.</p>
<p><strong>Please note that the send_message function will automatically
pass the authentication token (except for the case if</strong> <code class="docutils literal notranslate"><span class="pre">raw=True</span></code>
<strong>).</strong></p>
<p><strong>Placing orders</strong> using an authenticated websocket connection can be
easily done as shown in the example below. See
<a class="reference external" href="https://docs.kraken.com/websockets-v2/#add-order">https://docs.kraken.com/websockets-v2/#add-order</a> to retrieve more
information about the available parameters.</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">Spot Websocket v2: Place a new order</span><a class="headerlink" href="#id4" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">client_auth</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span>
<span class="linenos"> 2</span><span class="gp">... </span>    <span class="n">message</span><span class="o">=</span><span class="p">{</span>
<span class="linenos"> 3</span><span class="gp">... </span>        <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;add_order&quot;</span><span class="p">,</span>
<span class="linenos"> 4</span><span class="gp">... </span>        <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="linenos"> 5</span><span class="gp">... </span>            <span class="s2">&quot;limit_price&quot;</span><span class="p">:</span> <span class="mf">1234.56</span><span class="p">,</span>
<span class="linenos"> 6</span><span class="gp">... </span>            <span class="s2">&quot;order_type&quot;</span><span class="p">:</span> <span class="s2">&quot;limit&quot;</span><span class="p">,</span>
<span class="linenos"> 7</span><span class="gp">... </span>            <span class="s2">&quot;order_userref&quot;</span><span class="p">:</span> <span class="mi">123456789</span><span class="p">,</span>
<span class="linenos"> 8</span><span class="gp">... </span>            <span class="s2">&quot;order_qty&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
<span class="linenos"> 9</span><span class="gp">... </span>            <span class="s2">&quot;side&quot;</span><span class="p">:</span> <span class="s2">&quot;buy&quot;</span><span class="p">,</span>
<span class="linenos">10</span><span class="gp">... </span>            <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="s2">&quot;BTC/USD&quot;</span><span class="p">,</span>
<span class="linenos">11</span><span class="gp">... </span>        <span class="p">},</span>
<span class="linenos">12</span><span class="gp">... </span>    <span class="p">}</span>
<span class="linenos">13</span><span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><strong>Placing orders as batch</strong> can be done by passing <code class="docutils literal notranslate"><span class="pre">batch_add</span></code> as
method. Its parameters and limitations are described in
<a class="reference external" href="https://docs.kraken.com/websockets-v2/#batch-add">https://docs.kraken.com/websockets-v2/#batch-add</a>.</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">Spot Websocket v2: Placing orders as batch</span><a class="headerlink" href="#id5" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">client_auth</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span>
<span class="linenos"> 2</span><span class="gp">... </span>    <span class="n">message</span><span class="o">=</span><span class="p">{</span>
<span class="linenos"> 3</span><span class="gp">... </span>        <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;batch_add&quot;</span><span class="p">,</span>
<span class="linenos"> 4</span><span class="gp">... </span>        <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="linenos"> 5</span><span class="gp">... </span>            <span class="s2">&quot;orders&quot;</span><span class="p">:</span> <span class="p">[</span>
<span class="linenos"> 6</span><span class="gp">... </span>                <span class="p">{</span>
<span class="linenos"> 7</span><span class="gp">... </span>                    <span class="s2">&quot;limit_price&quot;</span><span class="p">:</span> <span class="mf">1000.23</span><span class="p">,</span>
<span class="linenos"> 8</span><span class="gp">... </span>                    <span class="s2">&quot;order_qty&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<span class="linenos"> 9</span><span class="gp">... </span>                    <span class="s2">&quot;order_type&quot;</span><span class="p">:</span> <span class="s2">&quot;limit&quot;</span><span class="p">,</span>
<span class="linenos">10</span><span class="gp">... </span>                    <span class="s2">&quot;order_userref&quot;</span><span class="p">:</span> <span class="mi">123456789</span><span class="p">,</span>
<span class="linenos">11</span><span class="gp">... </span>                    <span class="s2">&quot;side&quot;</span><span class="p">:</span> <span class="s2">&quot;buy&quot;</span><span class="p">,</span>
<span class="linenos">12</span><span class="gp">... </span>                <span class="p">},</span>
<span class="linenos">13</span><span class="gp">... </span>                <span class="p">{</span>
<span class="linenos">14</span><span class="gp">... </span>                    <span class="s2">&quot;limit_price&quot;</span><span class="p">:</span> <span class="mf">500.21</span><span class="p">,</span>
<span class="linenos">15</span><span class="gp">... </span>                    <span class="s2">&quot;order_qty&quot;</span><span class="p">:</span> <span class="mf">2.12345</span><span class="p">,</span>
<span class="linenos">16</span><span class="gp">... </span>                    <span class="s2">&quot;order_type&quot;</span><span class="p">:</span> <span class="s2">&quot;limit&quot;</span><span class="p">,</span>
<span class="linenos">17</span><span class="gp">... </span>                    <span class="s2">&quot;order_userref&quot;</span><span class="p">:</span> <span class="mi">212345679</span><span class="p">,</span>
<span class="linenos">18</span><span class="gp">... </span>                    <span class="s2">&quot;side&quot;</span><span class="p">:</span> <span class="s2">&quot;sell&quot;</span><span class="p">,</span>
<span class="linenos">19</span><span class="gp">... </span>                    <span class="s2">&quot;stp_type&quot;</span><span class="p">:</span> <span class="s2">&quot;cancel_both&quot;</span><span class="p">,</span>
<span class="linenos">20</span><span class="gp">... </span>                <span class="p">},</span>
<span class="linenos">21</span><span class="gp">... </span>            <span class="p">],</span>
<span class="linenos">22</span><span class="gp">... </span>            <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="s2">&quot;BTC/USD&quot;</span><span class="p">,</span>
<span class="linenos">23</span><span class="gp">... </span>            <span class="s2">&quot;validate&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<span class="linenos">24</span><span class="gp">... </span>        <span class="p">},</span>
<span class="linenos">25</span><span class="gp">... </span>    <span class="p">}</span>
<span class="linenos">26</span><span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><strong>Cancel orders as batch</strong> is available using the <code class="docutils literal notranslate"><span class="pre">batch_cancel</span></code>
method as described in
<a class="reference external" href="https://docs.kraken.com/websockets-v2/#batch-cancel">https://docs.kraken.com/websockets-v2/#batch-cancel</a>.</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">Spot Websocket v2: Cancel orders as batch</span><a class="headerlink" href="#id6" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">client_auth</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span>
<span class="linenos"> 2</span><span class="gp">... </span>    <span class="n">message</span><span class="o">=</span><span class="p">{</span>
<span class="linenos"> 3</span><span class="gp">... </span>        <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;batch_cancel&quot;</span><span class="p">,</span>
<span class="linenos"> 4</span><span class="gp">... </span>        <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="linenos"> 5</span><span class="gp">... </span>            <span class="s2">&quot;orders&quot;</span><span class="p">:</span> <span class="p">[</span>
<span class="linenos"> 6</span><span class="gp">... </span>                <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
<span class="linenos"> 7</span><span class="gp">... </span>                <span class="s2">&quot;212345679&quot;</span><span class="p">,</span>
<span class="linenos"> 8</span><span class="gp">... </span>                <span class="s2">&quot;ORDER-ID123-4567890&quot;</span>
<span class="linenos"> 9</span><span class="gp">... </span>            <span class="p">],</span>
<span class="linenos">10</span><span class="gp">... </span>        <span class="p">},</span>
<span class="linenos">11</span><span class="gp">... </span>    <span class="p">}</span>
<span class="linenos">12</span><span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><strong>Cancel all orders</strong> can be used as the name suggests - to cancel
all open orders (see
<a class="reference external" href="https://docs.kraken.com/websockets-v2/#cancel-all-orders">https://docs.kraken.com/websockets-v2/#cancel-all-orders</a>).</p>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">Spot Websocket v2: Cancel all orders</span><a class="headerlink" href="#id7" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">client_auth</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span>
<span class="linenos">2</span><span class="gp">... </span>    <span class="n">message</span><span class="o">=</span><span class="p">{</span>
<span class="linenos">3</span><span class="gp">... </span>        <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;cancel_all&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="gp">... </span>    <span class="p">}</span>
<span class="linenos">5</span><span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><strong>Death Man’s Switch</strong> is a useful utility to reduce the risk of losses
due to network fuckups since it will cancel all orders if the call
was not received by Kraken within a certain amount of time. See
<a class="reference external" href="https://docs.kraken.com/websockets-v2/#cancel-all-orders-after">https://docs.kraken.com/websockets-v2/#cancel-all-orders-after</a> for more
information.</p>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">Spot Websocket v2: Death Man’s Switch / cancel_all_orders_after</span><a class="headerlink" href="#id8" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">client_auth</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span>
<span class="linenos">2</span><span class="gp">... </span>    <span class="n">message</span><span class="o">=</span><span class="p">{</span>
<span class="linenos">3</span><span class="gp">... </span>        <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;cancel_all_orders_after&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="gp">... </span>        <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;timeout&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">},</span>
<span class="linenos">5</span><span class="gp">... </span>    <span class="p">}</span>
<span class="linenos">6</span><span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><strong>Canceling orders</strong> is a common task during trading and can be done
as described in <a class="reference external" href="https://docs.kraken.com/websockets-v2/#cancel-order">https://docs.kraken.com/websockets-v2/#cancel-order</a>.</p>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text">Spot Websocket v2: Cancel order(s)</span><a class="headerlink" href="#id9" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">client_auth</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span>
<span class="linenos">2</span><span class="gp">... </span>    <span class="n">message</span><span class="o">=</span><span class="p">{</span>
<span class="linenos">3</span><span class="gp">... </span>        <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;cancel_order&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="gp">... </span>        <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="linenos">5</span><span class="gp">... </span>            <span class="s2">&quot;order_id&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;ORDER-ID123-456789&quot;</span><span class="p">,</span> <span class="s2">&quot;ORDER-ID123-987654&quot;</span><span class="p">],</span>
<span class="linenos">6</span><span class="gp">... </span>        <span class="p">},</span>
<span class="linenos">7</span><span class="gp">... </span>    <span class="p">}</span>
<span class="linenos">8</span><span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><strong>Editing orders</strong> can be done as shown in the example below. See
<a class="reference external" href="https://docs.kraken.com/websockets-v2/#edit-order">https://docs.kraken.com/websockets-v2/#edit-order</a> for more information.</p>
<div class="literal-block-wrapper docutils container" id="id10">
<div class="code-block-caption"><span class="caption-text">Spot Websocket v2: Cancel order(s)</span><a class="headerlink" href="#id10" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">client_auth</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span>
<span class="linenos"> 2</span><span class="gp">... </span>    <span class="n">message</span><span class="o">=</span><span class="p">{</span>
<span class="linenos"> 3</span><span class="gp">... </span>        <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;edit_order&quot;</span><span class="p">,</span>
<span class="linenos"> 4</span><span class="gp">... </span>        <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="linenos"> 5</span><span class="gp">... </span>            <span class="s2">&quot;order_id&quot;</span><span class="p">:</span> <span class="s2">&quot;ORDER-ID123-456789&quot;</span><span class="p">,</span>
<span class="linenos"> 6</span><span class="gp">... </span>            <span class="s2">&quot;order_qty&quot;</span><span class="p">:</span> <span class="mf">2.5</span><span class="p">,</span>
<span class="linenos"> 7</span><span class="gp">... </span>            <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="s2">&quot;BTC/USD&quot;</span><span class="p">,</span>
<span class="linenos"> 8</span><span class="gp">... </span>        <span class="p">},</span>
<span class="linenos"> 9</span><span class="gp">... </span>    <span class="p">}</span>
<span class="linenos">10</span><span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><strong>Subscribing</strong> to websocket feeds can be done using the send_message
function but it is recommended to use
<a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV2.subscribe" title="kraken.spot.KrakenSpotWSClientV2.subscribe"><code class="xref py py-func docutils literal notranslate"><span class="pre">kraken.spot.KrakenSpotWSClientV2.subscribe()</span></code></a> instead.</p>
<div class="literal-block-wrapper docutils container" id="id11">
<div class="code-block-caption"><span class="caption-text">Spot Websocket v2: Subscribe to a websocket feed</span><a class="headerlink" href="#id11" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span>
<span class="linenos">2</span><span class="gp">... </span>    <span class="n">message</span><span class="o">=</span><span class="p">{</span>
<span class="linenos">3</span><span class="gp">... </span>        <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;subscribe&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="gp">... </span>        <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;channel&quot;</span><span class="p">:</span> <span class="s2">&quot;book&quot;</span><span class="p">,</span> <span class="s2">&quot;snapshot&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;BTC/USD&quot;</span><span class="p">]},</span>
<span class="linenos">5</span><span class="gp">... </span>    <span class="p">}</span>
<span class="linenos">6</span><span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.spot.KrakenSpotWSClientV2.subscribe">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">subscribe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">req_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#kraken.spot.KrakenSpotWSClientV2.subscribe" title="Link to this definition"></a></dt>
<dd><p>Subscribe to a channel/feed</p>
<p>Success or failures are sent over the websocket connection and can be
received via the on_message or callback function.</p>
<p>When accessing private endpoints and subscription feeds that need
authentication make sure that the <code class="docutils literal notranslate"><span class="pre">Access</span> <span class="pre">WebSockets</span> <span class="pre">API</span></code> API key
permission is set in the users Kraken account.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.kraken.com/websockets-v2/#subscribe">https://docs.kraken.com/websockets-v2/#subscribe</a></p></li>
</ul>
<p>See <a class="reference external" href="https://docs.kraken.com/websockets-v2/#channels">https://docs.kraken.com/websockets-v2/#channels</a> for all channels.</p>
<p><strong>Please note</strong> that this function automatically assigns the <code class="docutils literal notranslate"><span class="pre">method</span></code>
key and sets its value to <code class="docutils literal notranslate"><span class="pre">subscribe</span></code>. The authentication token is
also assigned automatically, so only the <code class="docutils literal notranslate"><span class="pre">params</span></code> are needed here.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>params</strong> (<em>dict</em>) – The subscription message</p></li>
<li><p><strong>req_id</strong> (<em>int</em><em>, </em><em>optional</em>) – Identification number that will be added to the
response message sent by the websocket feed.</p></li>
</ul>
</dd>
</dl>
<p>Initialize your client as described in
<a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV2" title="kraken.spot.KrakenSpotWSClientV2"><code class="xref py py-class docutils literal notranslate"><span class="pre">kraken.spot.KrakenSpotWSClientV2</span></code></a> to run the following example:</p>
<div class="literal-block-wrapper docutils container" id="id12">
<div class="code-block-caption"><span class="caption-text">Spot Websocket v2: Subscribe to a websocket feed</span><a class="headerlink" href="#id12" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span>
<span class="linenos">2</span><span class="gp">... </span>    <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;channel&quot;</span><span class="p">:</span> <span class="s2">&quot;ticker&quot;</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;BTC/USD&quot;</span><span class="p">]}</span>
<span class="linenos">3</span><span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.spot.KrakenSpotWSClientV2.unsubscribe">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">unsubscribe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">req_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#kraken.spot.KrakenSpotWSClientV2.unsubscribe" title="Link to this definition"></a></dt>
<dd><p>Unsubscribe from a channel/feed</p>
<p>Success or failures are sent via the websocket connection and can be
received via the on_message or callback function.</p>
<p>When accessing private endpoints and subscription feeds that need
authentication make sure, that the <code class="docutils literal notranslate"><span class="pre">Access</span> <span class="pre">WebSockets</span> <span class="pre">API</span></code> API key
permission is set in the users Kraken account.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.kraken.com/websockets-v2/#unsubscribe">https://docs.kraken.com/websockets-v2/#unsubscribe</a></p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>params</strong> (<em>dict</em>) – The unsubscription message (only the params part)</p>
</dd>
</dl>
<p>Initialize your client as described in
<a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV2" title="kraken.spot.KrakenSpotWSClientV2"><code class="xref py py-class docutils literal notranslate"><span class="pre">kraken.spot.KrakenSpotWSClientV2</span></code></a> to run the following example:</p>
<div class="literal-block-wrapper docutils container" id="id13">
<div class="code-block-caption"><span class="caption-text">Spot Websocket v2: Unsubscribe from a websocket feed</span><a class="headerlink" href="#id13" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">unsubscribe</span><span class="p">(</span>
<span class="linenos">2</span><span class="gp">... </span>    <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;channel&quot;</span><span class="p">:</span> <span class="s2">&quot;ticker&quot;</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;BTC/USD&quot;</span><span class="p">]}</span>
<span class="linenos">3</span><span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="kraken.spot.KrakenSpotWSClientV1">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kraken.spot.</span></span><span class="sig-name descname"><span class="pre">KrakenSpotWSClientV1</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">secret</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_public</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.spot.KrakenSpotWSClientV1" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="../base_api/base_api.html#kraken.spot.websocket.KrakenSpotWSClientBase" title="kraken.spot.websocket.KrakenSpotWSClientBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">KrakenSpotWSClientBase</span></code></a></p>
<p>Class to access public and private/authenticated websocket connections.</p>
<p><strong>This client only supports the Kraken Websocket API v1.</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.kraken.com/websockets">https://docs.kraken.com/websockets</a></p></li>
</ul>
<p>… please use <a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV2" title="kraken.spot.KrakenSpotWSClientV2"><code class="xref py py-class docutils literal notranslate"><span class="pre">KrakenSpotWSClientV2</span></code></a> for accessing the Kraken
Websockets API v2.</p>
<p>This class holds up to two websocket connections, one private and one
public.</p>
<p>When accessing private endpoints that need authentication make sure, that
the <code class="docutils literal notranslate"><span class="pre">Access</span> <span class="pre">WebSockets</span> <span class="pre">API</span></code> API key permission is set in the user’s
account. To place or cancel orders, querying ledger information or accessing
live portfolio changes (fills, new orders, …) there are separate
permissions that must be enabled if required.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em><em>, </em><em>optional</em>) – API Key for the Kraken Spot API (default: <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>)</p></li>
<li><p><strong>secret</strong> (<em>str</em><em>, </em><em>optional</em>) – Secret API Key for the Kraken Spot API (default: <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>)</p></li>
<li><p><strong>url</strong> (<em>str</em><em>, </em><em>optional</em>) – Set a specific URL to access the Kraken REST API</p></li>
<li><p><strong>no_public</strong> – Disables public connection (default: <code class="docutils literal notranslate"><span class="pre">False</span></code>). If not
set or set to <code class="docutils literal notranslate"><span class="pre">False</span></code>, the client will create a public and a private
connection per default. If only a private connection is required, this
parameter should be set to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><strong>beta</strong> (<em>bool</em>) – Use the beta websocket channels (maybe not supported anymore,
default: <code class="docutils literal notranslate"><span class="pre">False</span></code>)</p></li>
</ul>
</dd>
</dl>
<div class="literal-block-wrapper docutils container" id="id14">
<div class="code-block-caption"><span class="caption-text">HowTo: Use the Kraken Spot websocket client (v1)</span><a class="headerlink" href="#id14" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">kraken.spot</span> <span class="kn">import</span> <span class="n">KrakenSpotWSClientV1</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="k">class</span> <span class="nc">Client</span><span class="p">(</span><span class="n">KrakenSpotWSClientV1</span><span class="p">):</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">on_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
<span class="linenos"> 8</span>        <span class="nb">print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="linenos">12</span>
<span class="linenos">13</span>    <span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>         <span class="c1"># unauthenticated</span>
<span class="linenos">14</span>    <span class="n">client_auth</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span>     <span class="c1"># authenticated</span>
<span class="linenos">15</span>        <span class="n">key</span><span class="o">=</span><span class="s2">&quot;kraken-api-key&quot;</span><span class="p">,</span>
<span class="linenos">16</span>        <span class="n">secret</span><span class="o">=</span><span class="s2">&quot;kraken-secret-key&quot;</span>
<span class="linenos">17</span>    <span class="p">)</span>
<span class="linenos">18</span>
<span class="linenos">19</span>    <span class="c1"># subscribe to the desired feeds:</span>
<span class="linenos">20</span>    <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span>
<span class="linenos">21</span>        <span class="n">subscription</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">ticker</span><span class="p">},</span>
<span class="linenos">22</span>        <span class="n">pair</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;XBTUSD&quot;</span><span class="p">,</span> <span class="s2">&quot;DOT/EUR&quot;</span><span class="p">]</span>
<span class="linenos">23</span>    <span class="p">)</span>
<span class="linenos">24</span>    <span class="c1"># from now on the on_message function receives the ticker feed</span>
<span class="linenos">25</span>
<span class="linenos">26</span>    <span class="k">while</span> <span class="ow">not</span> <span class="n">client</span><span class="o">.</span><span class="n">exception_occur</span><span class="p">:</span>
<span class="linenos">27</span>        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="linenos">28</span>
<span class="linenos">29</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="linenos">30</span>    <span class="k">try</span><span class="p">:</span>
<span class="linenos">31</span>        <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
<span class="linenos">32</span>    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
<span class="linenos">33</span>        <span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id15">
<div class="code-block-caption"><span class="caption-text">HowTo: Use the websocket client (v1) as instance</span><a class="headerlink" href="#id15" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">kraken.spot</span> <span class="kn">import</span> <span class="n">KrakenSpotWSClientV1</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 6</span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">on_message</span><span class="p">(</span><span class="n">message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 7</span>        <span class="nb">print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span>    <span class="n">client</span> <span class="o">=</span> <span class="n">KrakenSpotWSClientV1</span><span class="p">(</span><span class="n">callback</span><span class="o">=</span><span class="n">on_message</span><span class="p">)</span>
<span class="linenos">10</span>    <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span>
<span class="linenos">11</span>        <span class="n">subscription</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;ticker&quot;</span><span class="p">},</span>
<span class="linenos">12</span>        <span class="n">pair</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;XBT/USD&quot;</span><span class="p">]</span>
<span class="linenos">13</span>    <span class="p">)</span>
<span class="linenos">14</span>
<span class="linenos">15</span>    <span class="k">while</span> <span class="ow">not</span> <span class="n">client</span><span class="o">.</span><span class="n">exception_occur</span><span class="p">:</span>
<span class="linenos">16</span>        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="linenos">17</span>
<span class="linenos">18</span>
<span class="linenos">19</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="linenos">20</span>    <span class="k">try</span><span class="p">:</span>
<span class="linenos">21</span>        <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
<span class="linenos">22</span>    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
<span class="linenos">23</span>        <span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id16">
<div class="code-block-caption"><span class="caption-text">HowTo: Use the websocket client (v1) as context manager</span><a class="headerlink" href="#id16" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">kraken.spot</span> <span class="kn">import</span> <span class="n">KrakenSpotWSClientV1</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="k">async</span> <span class="k">def</span> <span class="nf">on_message</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
<span class="linenos"> 5</span>    <span class="nb">print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 8</span>    <span class="k">async</span> <span class="k">with</span> <span class="n">KrakenSpotWSClientV1</span><span class="p">(</span>
<span class="linenos"> 9</span>        <span class="n">key</span><span class="o">=</span><span class="s2">&quot;api-key&quot;</span><span class="p">,</span>
<span class="linenos">10</span>        <span class="n">secret</span><span class="o">=</span><span class="s2">&quot;secret-key&quot;</span><span class="p">,</span>
<span class="linenos">11</span>        <span class="n">callback</span><span class="o">=</span><span class="n">on_message</span>
<span class="linenos">12</span>    <span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
<span class="linenos">13</span>        <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span>
<span class="linenos">14</span>            <span class="n">subscription</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;ticker&quot;</span><span class="p">},</span>
<span class="linenos">15</span>            <span class="n">pair</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;XBT/USD&quot;</span><span class="p">]</span>
<span class="linenos">16</span>        <span class="p">)</span>
<span class="linenos">17</span>
<span class="linenos">18</span>    <span class="k">while</span> <span class="kc">True</span>
<span class="linenos">19</span>        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="linenos">20</span>
<span class="linenos">21</span>
<span class="linenos">22</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="linenos">23</span>    <span class="k">try</span><span class="p">:</span>
<span class="linenos">24</span>        <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
<span class="linenos">25</span>    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
<span class="linenos">26</span>        <span class="k">pass</span>
</pre></div>
</div>
</div>
<dl class="py property">
<dt class="sig sig-object py" id="kraken.spot.KrakenSpotWSClientV1.active_private_subscriptions">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">active_private_subscriptions</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Any</span></em><a class="headerlink" href="#kraken.spot.KrakenSpotWSClientV1.active_private_subscriptions" title="Link to this definition"></a></dt>
<dd><p>Returns the active private subscriptions</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>List of active private subscriptions</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>list[dict] | Any</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ConnectionError</strong> – If there is no active private connection</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="kraken.spot.KrakenSpotWSClientV1.active_public_subscriptions">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">active_public_subscriptions</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Any</span></em><a class="headerlink" href="#kraken.spot.KrakenSpotWSClientV1.active_public_subscriptions" title="Link to this definition"></a></dt>
<dd><p>Returns the active public subscriptions</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>List of active public subscriptions</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>list[dict] | Any</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ConnectionError</strong> – If there is no active public connection.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.spot.KrakenSpotWSClientV1.cancel_all_orders">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cancel_all_orders</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#kraken.spot.KrakenSpotWSClientV1.cancel_all_orders" title="Link to this definition"></a></dt>
<dd><p>Cancel all open Spot orders.</p>
<p>Requires the <code class="docutils literal notranslate"><span class="pre">Access</span> <span class="pre">WebSockets</span> <span class="pre">API</span></code> and <code class="docutils literal notranslate"><span class="pre">Cancel/close</span> <span class="pre">orders</span></code> API
key permissions.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.kraken.com/websockets/#message-cancelAll">https://docs.kraken.com/websockets/#message-cancelAll</a></p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="../exceptions/exceptions.html#kraken.exceptions.KrakenAuthenticationError" title="kraken.exceptions.KrakenAuthenticationError"><strong>KrakenAuthenticationError</strong></a> – If the websocket is not connected or
the connection is not authenticated</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<p>Initialize your client as described in
<a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV1" title="kraken.spot.KrakenSpotWSClientV1"><code class="xref py py-class docutils literal notranslate"><span class="pre">kraken.spot.KrakenSpotWSClientV1</span></code></a> to run the following example:</p>
<div class="literal-block-wrapper docutils container" id="id17">
<div class="code-block-caption"><span class="caption-text">Spot Websocket: Cancel all Orders</span><a class="headerlink" href="#id17" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">client_auth</span><span class="o">.</span><span class="n">cancel_all_orders</span><span class="p">()</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.spot.KrakenSpotWSClientV1.cancel_all_orders_after">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cancel_all_orders_after</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#kraken.spot.KrakenSpotWSClientV1.cancel_all_orders_after" title="Link to this definition"></a></dt>
<dd><p>Set a Death Man’s Switch</p>
<p>Requires the <code class="docutils literal notranslate"><span class="pre">Access</span> <span class="pre">WebSockets</span> <span class="pre">API</span></code> and <code class="docutils literal notranslate"><span class="pre">Cancel/close</span> <span class="pre">orders</span></code> API
key permissions.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.kraken.com/websockets/#message-cancelAllOrdersAfter">https://docs.kraken.com/websockets/#message-cancelAllOrdersAfter</a></p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>timeout</strong> (<em>int</em>) – Set the timeout in seconds to cancel the orders after,
set to <code class="docutils literal notranslate"><span class="pre">0</span></code> to reset.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="../exceptions/exceptions.html#kraken.exceptions.KrakenAuthenticationError" title="kraken.exceptions.KrakenAuthenticationError"><strong>KrakenAuthenticationError</strong></a> – If the websocket is not connected or
the connection is not authenticated</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p>Initialize your client as described in
<a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV1" title="kraken.spot.KrakenSpotWSClientV1"><code class="xref py py-class docutils literal notranslate"><span class="pre">kraken.spot.KrakenSpotWSClientV1</span></code></a> to run the following example:</p>
<div class="literal-block-wrapper docutils container" id="id18">
<div class="code-block-caption"><span class="caption-text">Spot Websocket: Death Man’s Switch</span><a class="headerlink" href="#id18" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">client_auth</span><span class="o">.</span><span class="n">cancel_all_orders_after</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.spot.KrakenSpotWSClientV1.cancel_order">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cancel_order</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">txid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#kraken.spot.KrakenSpotWSClientV1.cancel_order" title="Link to this definition"></a></dt>
<dd><p>Cancel a specific order or a list of orders.</p>
<p>Requires the <code class="docutils literal notranslate"><span class="pre">Access</span> <span class="pre">WebSockets</span> <span class="pre">API</span></code> and <code class="docutils literal notranslate"><span class="pre">Cancel/close</span> <span class="pre">orders</span></code> API
key permissions.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.kraken.com/websockets/#message-cancelOrder">https://docs.kraken.com/websockets/#message-cancelOrder</a></p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>txid</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – A single or multiple transaction ids as list</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="../exceptions/exceptions.html#kraken.exceptions.KrakenAuthenticationError" title="kraken.exceptions.KrakenAuthenticationError"><strong>KrakenAuthenticationError</strong></a> – If the websocket is not connected or
the connection is not authenticated</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p>Initialize your client as described in
<a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV1" title="kraken.spot.KrakenSpotWSClientV1"><code class="xref py py-class docutils literal notranslate"><span class="pre">kraken.spot.KrakenSpotWSClientV1</span></code></a> to run the following example:</p>
<div class="literal-block-wrapper docutils container" id="id19">
<div class="code-block-caption"><span class="caption-text">Spot Websocket: Cancel an order</span><a class="headerlink" href="#id19" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">client_auth</span><span class="o">.</span><span class="n">cancel_order</span><span class="p">(</span><span class="n">txid</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;OBGFYP-XVQNL-P4GMWF&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.spot.KrakenSpotWSClientV1.create_order">
<span class="sig-name descname"><span class="pre">create_order</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ordertype</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">side</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pair</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">volume</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">price</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">price2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">leverage</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oflags</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">starttm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expiretm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deadline</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">userref</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">close_ordertype</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">close_price</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">close_price2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeinforce</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">truncate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#kraken.spot.KrakenSpotWSClientV1.create_order" title="Link to this definition"></a></dt>
<dd><p>Create an order and submit it.</p>
<p>Requires the <code class="docutils literal notranslate"><span class="pre">Access</span> <span class="pre">WebSockets</span> <span class="pre">API</span></code> and <code class="docutils literal notranslate"><span class="pre">Create</span> <span class="pre">and</span> <span class="pre">modify</span> <span class="pre">orders</span></code>
API key permissions.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.kraken.com/websockets/#message-addOrder">https://docs.kraken.com/websockets/#message-addOrder</a></p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ordertype</strong> (<em>str</em>) – The type of order, one of: <code class="docutils literal notranslate"><span class="pre">limit</span></code>, <code class="docutils literal notranslate"><span class="pre">market</span></code>,
<code class="docutils literal notranslate"><span class="pre">stop-loss</span></code>, <code class="docutils literal notranslate"><span class="pre">take-profit</span></code>, <code class="docutils literal notranslate"><span class="pre">stop-loss-limit</span></code>,
<code class="docutils literal notranslate"><span class="pre">settle-position</span></code>, <code class="docutils literal notranslate"><span class="pre">take-profit-limit</span></code> (see:
<a class="reference external" href="https://support.kraken.com/hc/en-us/sections/200577136-Order-types">https://support.kraken.com/hc/en-us/sections/200577136-Order-types</a>)</p></li>
<li><p><strong>side</strong> (<em>str</em>) – The side - one of <code class="docutils literal notranslate"><span class="pre">buy</span></code>, <code class="docutils literal notranslate"><span class="pre">sell</span></code></p></li>
<li><p><strong>pair</strong> (<em>str</em>) – The asset pair to trade</p></li>
<li><p><strong>volume</strong> (<em>str</em><em> | </em><em>float</em>) – The volume of the order that is being created</p></li>
<li><p><strong>price</strong> (<em>str</em><em> | </em><em>float</em><em>, </em><em>optional</em>) – The limit price for <code class="docutils literal notranslate"><span class="pre">limit</span></code> orders or the trigger price
for orders with <code class="docutils literal notranslate"><span class="pre">ordertype</span></code> one of <code class="docutils literal notranslate"><span class="pre">stop-loss</span></code>,
<code class="docutils literal notranslate"><span class="pre">stop-loss-limit</span></code>, <code class="docutils literal notranslate"><span class="pre">take-profit</span></code>, and <code class="docutils literal notranslate"><span class="pre">take-profit-limit</span></code></p></li>
<li><p><strong>price2</strong> (<em>str</em><em> | </em><em>float</em><em>, </em><em>optional</em>) – The second price for <code class="docutils literal notranslate"><span class="pre">stop-loss-limit</span></code> and
<code class="docutils literal notranslate"><span class="pre">take-profit-limit</span></code> orders (see the referenced Kraken
documentation for more information)</p></li>
<li><p><strong>leverage</strong> (<em>str</em><em> | </em><em>float</em><em>, </em><em>optional</em>) – The leverage</p></li>
<li><p><strong>oflags</strong> (<em>str</em><em> | </em><em>list</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) – Order flags like <code class="docutils literal notranslate"><span class="pre">post</span></code>, <code class="docutils literal notranslate"><span class="pre">fcib</span></code>, <code class="docutils literal notranslate"><span class="pre">fciq</span></code>, <code class="docutils literal notranslate"><span class="pre">nomp</span></code>,
<code class="docutils literal notranslate"><span class="pre">viqc</span></code> (see the referenced Kraken documentation for more
information)</p></li>
<li><p><strong>starttm</strong> (<em>str</em><em> | </em><em>int</em><em>, </em><em>optional</em>) – Unix timestamp or seconds defining the start time
(default: <code class="docutils literal notranslate"><span class="pre">&quot;0&quot;</span></code>)</p></li>
<li><p><strong>expiretim</strong> (<em>str</em>) – Unix timestamp or time in seconds defining the
expiration of the order (default: <code class="docutils literal notranslate"><span class="pre">&quot;0&quot;</span></code> - i.e., no expiration)</p></li>
<li><p><strong>deadline</strong> (<em>str</em>) – RFC3339 timestamp + {0..60} seconds that defines when
the matching engine should reject the order.</p></li>
<li><p><strong>userref</strong> (<em>int</em>) – User reference id for example to group orders</p></li>
<li><p><strong>close_ordertype</strong> (<em>str</em><em>, </em><em>optional</em>) – Conditional close order type, one of:
<code class="docutils literal notranslate"><span class="pre">limit</span></code>, <code class="docutils literal notranslate"><span class="pre">stop-loss</span></code>, <code class="docutils literal notranslate"><span class="pre">take-profit</span></code>, <code class="docutils literal notranslate"><span class="pre">stop-loss-limit</span></code>,
<code class="docutils literal notranslate"><span class="pre">take-profit-limit</span></code></p></li>
<li><p><strong>close_price</strong> (<em>str</em><em> | </em><em>float</em><em>, </em><em>optional</em>) – Conditional close price</p></li>
<li><p><strong>close_price2</strong> (<em>str</em><em> | </em><em>float</em><em>, </em><em>optional</em>) – Second conditional close price</p></li>
<li><p><strong>timeinforce</strong> (<em>str</em><em>, </em><em>optional</em>) – How long the order remains in the orderbook, one of:
<code class="docutils literal notranslate"><span class="pre">GTC</span></code>, <code class="docutils literal notranslate"><span class="pre">IOC</span></code>, <code class="docutils literal notranslate"><span class="pre">GTD</span></code> (see the referenced Kraken documentation
for more information)</p></li>
<li><p><strong>truncate</strong> (<em>bool</em><em>, </em><em>optional</em>) – If enabled: round the <code class="docutils literal notranslate"><span class="pre">price</span></code> and <code class="docutils literal notranslate"><span class="pre">volume</span></code> to
Kraken’s maximum allowed decimal places. See
<a class="reference external" href="https://support.kraken.com/hc/en-us/articles/4521313131540">https://support.kraken.com/hc/en-us/articles/4521313131540</a> fore more
information about decimals.</p></li>
<li><p><strong>validate</strong> (<em>bool</em><em>, </em><em>optional</em>) – Validate the order without placing on the market
(default: <code class="docutils literal notranslate"><span class="pre">False</span></code>)</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="../exceptions/exceptions.html#kraken.exceptions.KrakenAuthenticationError" title="kraken.exceptions.KrakenAuthenticationError"><strong>KrakenAuthenticationError</strong></a> – If the websocket is not connected or
the connection is not authenticated</p></li>
<li><p><strong>ValueError</strong> – If input is not correct</p></li>
</ul>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p>Initialize your client as described in
<a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV1" title="kraken.spot.KrakenSpotWSClientV1"><code class="xref py py-class docutils literal notranslate"><span class="pre">kraken.spot.KrakenSpotWSClientV1</span></code></a> to run the following example:</p>
<div class="literal-block-wrapper docutils container" id="id20">
<div class="code-block-caption"><span class="caption-text">Spot Websocket: Create an order</span><a class="headerlink" href="#id20" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">client_auth</span><span class="o">.</span><span class="n">create_order</span><span class="p">(</span>
<span class="linenos"> 2</span><span class="gp">... </span>    <span class="n">ordertype</span><span class="o">=</span><span class="s2">&quot;market&quot;</span><span class="p">,</span>
<span class="linenos"> 3</span><span class="gp">... </span>    <span class="n">pair</span><span class="o">=</span><span class="s2">&quot;XBTUSD&quot;</span><span class="p">,</span>
<span class="linenos"> 4</span><span class="gp">... </span>    <span class="n">side</span><span class="o">=</span><span class="s2">&quot;buy&quot;</span><span class="p">,</span>
<span class="linenos"> 5</span><span class="gp">... </span>    <span class="n">volume</span><span class="o">=</span><span class="mf">0.001</span>
<span class="linenos"> 6</span><span class="gp">... </span><span class="p">)</span>
<span class="linenos"> 7</span><span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">client_auth</span><span class="o">.</span><span class="n">create_order</span><span class="p">(</span>
<span class="linenos"> 8</span><span class="gp">... </span>    <span class="n">ordertype</span><span class="o">=</span><span class="s2">&quot;limit&quot;</span><span class="p">,</span>
<span class="linenos"> 9</span><span class="gp">... </span>    <span class="n">side</span><span class="o">=</span><span class="s2">&quot;buy&quot;</span><span class="p">,</span>
<span class="linenos">10</span><span class="gp">... </span>    <span class="n">pair</span><span class="o">=</span><span class="s2">&quot;XBTUSD&quot;</span><span class="p">,</span>
<span class="linenos">11</span><span class="gp">... </span>    <span class="n">volume</span><span class="o">=</span><span class="mf">0.02</span><span class="p">,</span>
<span class="linenos">12</span><span class="gp">... </span>    <span class="n">price</span><span class="o">=</span><span class="mi">23000</span><span class="p">,</span>
<span class="linenos">13</span><span class="gp">... </span>    <span class="n">expiretm</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span>
<span class="linenos">14</span><span class="gp">... </span>    <span class="n">oflags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="s2">&quot;fcib&quot;</span><span class="p">]</span>
<span class="linenos">15</span><span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.spot.KrakenSpotWSClientV1.edit_order">
<span class="sig-name descname"><span class="pre">edit_order</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">orderid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reqid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pair</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">price</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">price2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">volume</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oflags</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">newuserref</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">truncate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#kraken.spot.KrakenSpotWSClientV1.edit_order" title="Link to this definition"></a></dt>
<dd><p>Edit an open order that was placed on the Spot market.</p>
<p>Requires the <code class="docutils literal notranslate"><span class="pre">Access</span> <span class="pre">WebSockets</span> <span class="pre">API</span></code> and <code class="docutils literal notranslate"><span class="pre">Create</span> <span class="pre">and</span> <span class="pre">modify</span> <span class="pre">orders</span></code>
API key permissions.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.kraken.com/websockets/#message-editOrder">https://docs.kraken.com/websockets/#message-editOrder</a></p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>orderId</strong> (<em>str</em>) – The orderId of the order to edit</p></li>
<li><p><strong>reqid</strong> (<em>str</em><em> | </em><em>int</em><em>, </em><em>optional</em>) – Filter by reqid</p></li>
<li><p><strong>pair</strong> (<em>str</em><em>, </em><em>optional</em>) – Filter by pair</p></li>
<li><p><strong>price</strong> (<em>str</em><em> | </em><em>int</em><em> | </em><em>float</em><em>, </em><em>optional</em>) – Set a new price</p></li>
<li><p><strong>price2</strong> (<em>str</em><em> | </em><em>int</em><em> | </em><em>float</em><em>, </em><em>optional</em>) – Set a new second price</p></li>
<li><p><strong>volume</strong> (<em>str</em><em> | </em><em>int</em><em> | </em><em>float</em><em>, </em><em>optional</em>) – Set a new volume</p></li>
<li><p><strong>oflags</strong> (<em>str</em><em> | </em><em>list</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) – Set new oflags (overwrite old ones)</p></li>
<li><p><strong>newuserref</strong> (<em>str</em><em> | </em><em>int</em><em>, </em><em>optional</em>) – Set a new user reference id</p></li>
<li><p><strong>truncate</strong> (<em>bool</em><em>, </em><em>optional</em>) – If enabled: round the <code class="docutils literal notranslate"><span class="pre">price</span></code> and <code class="docutils literal notranslate"><span class="pre">volume</span></code> to
Kraken’s maximum allowed decimal places. See
<a class="reference external" href="https://support.kraken.com/hc/en-us/articles/4521313131540">https://support.kraken.com/hc/en-us/articles/4521313131540</a> fore more
information about decimals.</p></li>
<li><p><strong>validate</strong> (<em>bool</em><em>, </em><em>optional</em>) – Validate the input without applying the changes
(default: <code class="docutils literal notranslate"><span class="pre">False</span></code>)</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="../exceptions/exceptions.html#kraken.exceptions.KrakenAuthenticationError" title="kraken.exceptions.KrakenAuthenticationError"><strong>KrakenAuthenticationError</strong></a> – If the websocket is not connected or
the connection is not authenticated</p></li>
<li><p><strong>ValueError</strong> – If input is not correct</p></li>
</ul>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p>Initialize your client as described in
<a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV1" title="kraken.spot.KrakenSpotWSClientV1"><code class="xref py py-class docutils literal notranslate"><span class="pre">kraken.spot.KrakenSpotWSClientV1</span></code></a> to run the following example:</p>
<div class="literal-block-wrapper docutils container" id="id21">
<div class="code-block-caption"><span class="caption-text">Spot Websocket: Edit an order</span><a class="headerlink" href="#id21" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">client_auth</span><span class="o">.</span><span class="n">edit_order</span><span class="p">(</span>
<span class="linenos">2</span><span class="gp">... </span>    <span class="n">orderId</span><span class="o">=</span><span class="s2">&quot;OBGFYP-XVQNL-P4GMWF&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="gp">... </span>    <span class="n">volume</span><span class="o">=</span><span class="mf">0.75</span><span class="p">,</span>
<span class="linenos">4</span><span class="gp">... </span>    <span class="n">pair</span><span class="o">=</span><span class="s2">&quot;XBTUSD&quot;</span><span class="p">,</span>
<span class="linenos">5</span><span class="gp">... </span>    <span class="n">price</span><span class="o">=</span><span class="mi">20000</span>
<span class="linenos">6</span><span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.spot.KrakenSpotWSClientV1.get_ws_token">
<span class="sig-name descname"><span class="pre">get_ws_token</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="headerlink" href="#kraken.spot.KrakenSpotWSClientV1.get_ws_token" title="Link to this definition"></a></dt>
<dd><p>Get the authentication token to establish the authenticated
websocket connection. This is used internally and in most cases not
needed outside.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.kraken.com/rest/#tag/Websockets-Authentication">https://docs.kraken.com/rest/#tag/Websockets-Authentication</a></p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The authentication token</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.spot.KrakenSpotWSClientV1.on_message">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">on_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">list</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#kraken.spot.KrakenSpotWSClientV1.on_message" title="Link to this definition"></a></dt>
<dd><p>Calls the defined callback function (if defined). In most cases you
have to overwrite this function since it will receive all incoming
messages that will be sent by Kraken.</p>
<p>See <a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV1" title="kraken.spot.KrakenSpotWSClientV1"><code class="xref py py-class docutils literal notranslate"><span class="pre">kraken.spot.KrakenSpotWSClientV1</span></code></a> and
<a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV2" title="kraken.spot.KrakenSpotWSClientV2"><code class="xref py py-class docutils literal notranslate"><span class="pre">kraken.spot.KrakenSpotWSClientV2</span></code></a> for examples to use this
function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>message</strong> (<em>dict</em><em> | </em><em>list</em>) – The message received sent by Kraken via the websocket connection</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="kraken.spot.KrakenSpotWSClientV1.private_channel_names">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">private_channel_names</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#kraken.spot.KrakenSpotWSClientV1.private_channel_names" title="Link to this definition"></a></dt>
<dd><p>Returns the private subscription names</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>List of private subscription names (<code class="docutils literal notranslate"><span class="pre">ownTrades</span></code>,
<code class="docutils literal notranslate"><span class="pre">openOrders</span></code>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="kraken.spot.KrakenSpotWSClientV1.public_channel_names">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">public_channel_names</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#kraken.spot.KrakenSpotWSClientV1.public_channel_names" title="Link to this definition"></a></dt>
<dd><p>Returns the public subscription names</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>List of public subscription names (<code class="docutils literal notranslate"><span class="pre">ticker</span></code>,
<code class="docutils literal notranslate"><span class="pre">spread</span></code>, <code class="docutils literal notranslate"><span class="pre">book</span></code>, <code class="docutils literal notranslate"><span class="pre">ohlc</span></code>, <code class="docutils literal notranslate"><span class="pre">trade</span></code>, <code class="docutils literal notranslate"><span class="pre">*</span></code>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="kraken.spot.KrakenSpotWSClientV1.return_unique_id">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">return_unique_id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#kraken.spot.KrakenSpotWSClientV1.return_unique_id" title="Link to this definition"></a></dt>
<dd><p>Returns a unique uuid string</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>uuid</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.spot.KrakenSpotWSClientV1.send_message">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">send_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">private</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#kraken.spot.KrakenSpotWSClientV1.send_message" title="Link to this definition"></a></dt>
<dd><p>Sends a message via the websocket connection. For private messages the
authentication token will be assigned automatically if <code class="docutils literal notranslate"><span class="pre">raw=False</span></code>.</p>
<p>The user can specify a <code class="docutils literal notranslate"><span class="pre">reqid</span></code> within the message to identify
corresponding responses via websocket feed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>message</strong> (<em>dict</em>) – The content to send</p></li>
<li><p><strong>private</strong> (<em>bool</em><em>, </em><em>optional</em>) – Use authentication (default: <code class="docutils literal notranslate"><span class="pre">False</span></code>)</p></li>
<li><p><strong>raw</strong> (<em>bool</em><em>, </em><em>optional</em>) – If set to <code class="docutils literal notranslate"><span class="pre">True</span></code> the <code class="docutils literal notranslate"><span class="pre">message</span></code> will be sent directly.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.spot.KrakenSpotWSClientV1.subscribe">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">subscribe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subscription</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pair</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#kraken.spot.KrakenSpotWSClientV1.subscribe" title="Link to this definition"></a></dt>
<dd><p>Subscribe to a channel</p>
<p>Success or failures are sent over the websocket connection and can be
received via the on_message callback function.</p>
<p>When accessing private endpoints and subscription feeds that need
authentication make sure, that the <code class="docutils literal notranslate"><span class="pre">Access</span> <span class="pre">WebSockets</span> <span class="pre">API</span></code> API key
permission is set in the users Kraken account.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.kraken.com/websockets/#message-subscribe">https://docs.kraken.com/websockets/#message-subscribe</a></p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subscription</strong> (<em>dict</em>) – The subscription message</p></li>
<li><p><strong>pair</strong> (<em>list</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) – The pair to subscribe to</p></li>
</ul>
</dd>
</dl>
<p>Initialize your client as described in
<a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV1" title="kraken.spot.KrakenSpotWSClientV1"><code class="xref py py-class docutils literal notranslate"><span class="pre">kraken.spot.KrakenSpotWSClientV1</span></code></a> to run the following example:</p>
<div class="literal-block-wrapper docutils container" id="id22">
<div class="code-block-caption"><span class="caption-text">Spot Websocket v1: Subscribe to a websocket feed</span><a class="headerlink" href="#id22" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span>
<span class="linenos">2</span><span class="gp">... </span>    <span class="n">subscription</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">ticker</span><span class="p">},</span>
<span class="linenos">3</span><span class="gp">... </span>    <span class="n">pair</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;XBTUSD&quot;</span><span class="p">,</span> <span class="s2">&quot;DOT/EUR&quot;</span><span class="p">]</span>
<span class="linenos">4</span><span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.spot.KrakenSpotWSClientV1.unsubscribe">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">unsubscribe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subscription</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pair</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#kraken.spot.KrakenSpotWSClientV1.unsubscribe" title="Link to this definition"></a></dt>
<dd><p>Unsubscribe from a feed</p>
<p>Success or failures are sent via the websocket connection and can be
received via the on_message or callback function.</p>
<p>When accessing private endpoints and subscription feeds that need
authentication make sure, that the <code class="docutils literal notranslate"><span class="pre">Access</span> <span class="pre">WebSockets</span> <span class="pre">API</span></code> API key
permission is set in the users Kraken account.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.kraken.com/websockets/#message-unsubscribe">https://docs.kraken.com/websockets/#message-unsubscribe</a></p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subscription</strong> (<em>dict</em>) – The subscription to unsubscribe from</p></li>
<li><p><strong>pair</strong> (<em>list</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) – The pair or list of pairs to unsubscribe</p></li>
</ul>
</dd>
</dl>
<p>Initialize your client as described in
<a class="reference internal" href="#kraken.spot.KrakenSpotWSClientV1" title="kraken.spot.KrakenSpotWSClientV1"><code class="xref py py-class docutils literal notranslate"><span class="pre">kraken.spot.KrakenSpotWSClientV1</span></code></a> to run the following example:</p>
<div class="literal-block-wrapper docutils container" id="id23">
<div class="code-block-caption"><span class="caption-text">Spot Websocket v1: Unsubscribe from a websocket feed</span><a class="headerlink" href="#id23" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">unsubscribe</span><span class="p">(</span>
<span class="linenos">2</span><span class="gp">... </span>    <span class="n">subscription</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">ticker</span><span class="p">},</span>
<span class="linenos">3</span><span class="gp">... </span>    <span class="n">pair</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;XBTUSD&quot;</span><span class="p">,</span> <span class="s2">&quot;DOT/EUR&quot;</span><span class="p">]</span>
<span class="linenos">4</span><span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="kraken.spot.OrderbookClientV2">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kraken.spot.</span></span><span class="sig-name descname"><span class="pre">OrderbookClientV2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">depth</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.spot.OrderbookClientV2" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p><strong>This client is using the Kraken Websocket API v2</strong></p>
<p>The orderbook client can be used for instantiation and maintaining one or
multiple order books for Spot trading on the Kraken cryptocurrency exchange.
It uses websockets to subscribe to book feeds and receives book updates,
calculates the checksum and will publish the raw message to the
<a class="reference internal" href="#kraken.spot.OrderbookClientV2.on_book_update" title="kraken.spot.OrderbookClientV2.on_book_update"><code class="xref py py-func docutils literal notranslate"><span class="pre">on_book_update()</span></code></a> function or to the specified callback function.</p>
<p><a class="reference internal" href="#kraken.spot.OrderbookClientV2.get" title="kraken.spot.OrderbookClientV2.get"><code class="xref py py-func docutils literal notranslate"><span class="pre">get()</span></code></a> can be used to access a specific book of this client - they will
always be up-to date when used from within <a class="reference internal" href="#kraken.spot.OrderbookClientV2.on_book_update" title="kraken.spot.OrderbookClientV2.on_book_update"><code class="xref py py-func docutils literal notranslate"><span class="pre">on_book_update()</span></code></a>.</p>
<p>The client will resubscribe to the book feed(s) if any errors occur and
publish the changes to the mentioned function(s). This is required to
compute the correct checksum internally.</p>
<p>This class has a default book depth of 10. Available depths are: 10, 25, 50,
100, 500, 1000. This client can handle multiple books - but only for one
depth. When subscribing to books with different depths, please use separate
instances of this class.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.kraken.com/websockets-v2/#calculate-book-checksum">https://docs.kraken.com/websockets-v2/#calculate-book-checksum</a></p></li>
</ul>
<div class="literal-block-wrapper docutils container" id="id24">
<div class="code-block-caption"><span class="caption-text">Example: Create and maintain a Spot orderbook as custom class</span><a class="headerlink" href="#id24" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">kraken.spot</span> <span class="kn">import</span> <span class="n">OrderbookClientV2</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="k">class</span> <span class="nc">OrderBook</span><span class="p">(</span><span class="n">OrderbookClientV2</span><span class="p">):</span>
<span class="linenos"> 6</span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">on_book_update</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="s2">&quot;OrderBook&quot;</span><span class="p">,</span> <span class="n">pair</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span>
<span class="linenos"> 7</span>    <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 8</span><span class="w">        </span><span class="sd">&#39;&#39;&#39;This function must be overloaded to get the recent updates.&#39;&#39;&#39;</span>
<span class="linenos"> 9</span>        <span class="n">book</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pair</span><span class="o">=</span><span class="n">pair</span><span class="p">)</span> <span class="n">bid</span><span class="p">:</span><span class="n">s</span>
<span class="linenos">10</span>        <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">book</span><span class="p">[</span><span class="s2">&quot;bid&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">())</span> <span class="n">ask</span><span class="p">:</span>
<span class="linenos">11</span>        <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">book</span><span class="p">[</span><span class="s2">&quot;ask&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="linenos">12</span>
<span class="linenos">13</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Bid         Volume                Ask         Volume&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">level</span> <span class="ow">in</span>
<span class="linenos">14</span>        <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">depth</span><span class="p">):</span>
<span class="linenos">15</span>            <span class="nb">print</span><span class="p">(</span>
<span class="linenos">16</span>                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">bid</span><span class="p">[</span><span class="n">level</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">bid</span><span class="p">[</span><span class="n">level</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">)      </span><span class="si">{</span><span class="n">ask</span><span class="p">[</span><span class="n">level</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span>
<span class="linenos">17</span>                <span class="p">({</span><span class="n">ask</span><span class="p">[</span><span class="n">level</span><span class="p">][</span><span class="mi">1</span><span class="p">]})</span><span class="s2">&quot;</span>
<span class="linenos">18</span>            <span class="p">)</span>
<span class="linenos">19</span>
<span class="linenos">20</span><span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">21</span>    <span class="n">orderbook</span><span class="p">:</span> <span class="n">OrderBook</span> <span class="o">=</span> <span class="n">OrderBook</span><span class="p">(</span><span class="n">depth</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span> <span class="k">await</span> <span class="n">orderbook</span><span class="o">.</span><span class="n">add_book</span><span class="p">(</span>
<span class="linenos">22</span>        <span class="n">pairs</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;XBT/USD&quot;</span><span class="p">]</span>  <span class="c1"># we can also subscribe to more currency</span>
<span class="linenos">23</span>        <span class="n">pairs</span>
<span class="linenos">24</span>    <span class="p">)</span>
<span class="linenos">25</span>
<span class="linenos">26</span>    <span class="k">while</span> <span class="ow">not</span> <span class="n">orderbook</span><span class="o">.</span><span class="n">exception_occur</span><span class="p">:</span>
<span class="linenos">27</span>        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="linenos">28</span>
<span class="linenos">29</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="linenos">30</span>    <span class="k">try</span><span class="p">:</span>
<span class="linenos">31</span>        <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
<span class="linenos">32</span>    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
<span class="linenos">33</span>        <span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id25">
<div class="code-block-caption"><span class="caption-text">Example: Create and maintain a Spot orderbook using a callback</span><a class="headerlink" href="#id25" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">kraken.spot</span> <span class="kn">import</span> <span class="n">OrderbookClientV2</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="k">async</span> <span class="k">def</span> <span class="nf">my_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="s2">&quot;OrderBook&quot;</span><span class="p">,</span> <span class="n">pair</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 6</span><span class="w">    </span><span class="sd">&#39;&#39;&#39;This function do not need to be async.&#39;&#39;&#39;</span>
<span class="linenos"> 7</span>    <span class="nb">print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">10</span>    <span class="n">orderbook</span><span class="p">:</span> <span class="n">OrderBook</span> <span class="o">=</span> <span class="n">OrderBook</span><span class="p">(</span><span class="n">depth</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">my_callback</span><span class="p">)</span>
<span class="linenos">11</span>    <span class="k">await</span> <span class="n">orderbook</span><span class="o">.</span><span class="n">add_book</span><span class="p">(</span>
<span class="linenos">12</span>        <span class="n">pairs</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;XBT/USD&quot;</span><span class="p">]</span>  <span class="c1"># we can also subscribe to more currency</span>
<span class="linenos">13</span>        <span class="n">pairs</span>
<span class="linenos">14</span>    <span class="p">)</span>
<span class="linenos">15</span>
<span class="linenos">16</span>    <span class="k">while</span> <span class="ow">not</span> <span class="n">orderbook</span><span class="o">.</span><span class="n">exception_occur</span><span class="p">:</span>
<span class="linenos">17</span>        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="linenos">18</span>
<span class="linenos">19</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="linenos">20</span>    <span class="k">try</span><span class="p">:</span>
<span class="linenos">21</span>        <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
<span class="linenos">22</span>    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
<span class="linenos">23</span>        <span class="k">pass</span>
</pre></div>
</div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="kraken.spot.OrderbookClientV2.add_book">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_book</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pairs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#kraken.spot.OrderbookClientV2.add_book" title="Link to this definition"></a></dt>
<dd><p>Add an orderbook to this client. The feed will be subscribed and updates
will be published to the <a class="reference internal" href="#kraken.spot.OrderbookClientV2.on_book_update" title="kraken.spot.OrderbookClientV2.on_book_update"><code class="xref py py-func docutils literal notranslate"><span class="pre">on_book_update()</span></code></a> function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pairs</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – The pair(s) to subscribe to</p></li>
<li><p><strong>depth</strong> (<em>int</em>) – The book depth</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="kraken.spot.OrderbookClientV2.depth">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">depth</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#kraken.spot.OrderbookClientV2.depth" title="Link to this definition"></a></dt>
<dd><p>Return the fixed depth of this orderbook client.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="kraken.spot.OrderbookClientV2.exception_occur">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">exception_occur</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#kraken.spot.OrderbookClientV2.exception_occur" title="Link to this definition"></a></dt>
<dd><p>Can be used to determine if any critical error occurred within the
websocket connection. If so, the function will return <code class="docutils literal notranslate"><span class="pre">True</span></code> and the
client instance is most likely not usable anymore. So this is the
switch lets the user know, when to delete the current one and create a
new one.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if any critical error occurred else <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.spot.OrderbookClientV2.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pair</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#kraken.spot.OrderbookClientV2.get" title="Link to this definition"></a></dt>
<dd><p>Returns the orderbook for a specific <code class="docutils literal notranslate"><span class="pre">pair</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>pair</strong> (<em>str</em>) – The pair to get the orderbook from</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The orderbook of that <code class="docutils literal notranslate"><span class="pre">pair</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.spot.OrderbookClientV2.get_first">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_first</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="headerlink" href="#kraken.spot.OrderbookClientV2.get_first" title="Link to this definition"></a></dt>
<dd><p>This function is used as callback for the <code class="docutils literal notranslate"><span class="pre">sorted</span></code> method
to sort a tuple/list by its first value and while ensuring
that the values are floats and comparable.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>values</strong> (<em>tuple</em>) – A tuple of string values</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The first value of <code class="docutils literal notranslate"><span class="pre">values</span></code> as float.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.spot.OrderbookClientV2.on_book_update">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">on_book_update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pair</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#kraken.spot.OrderbookClientV2.on_book_update" title="Link to this definition"></a></dt>
<dd><p>This function will be called every time the orderbook gets updated. It
needs to be overloaded if no callback function was defined during the
instantiation of this class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pair</strong> (<em>str</em>) – The currency pair of the orderbook that has been updated.</p></li>
<li><p><strong>message</strong> (<em>dict</em>) – The book message sent by Kraken</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.spot.OrderbookClientV2.on_message">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">on_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#kraken.spot.OrderbookClientV2.on_message" title="Link to this definition"></a></dt>
<dd><p><em>This function must not be overloaded - it would break this client!</em></p>
<p>It receives and processes the book related websocket messages and is
only publicly visible for those who understand and are willing to mock
it.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.spot.OrderbookClientV2.remove_book">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">remove_book</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pairs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#kraken.spot.OrderbookClientV2.remove_book" title="Link to this definition"></a></dt>
<dd><p>Unsubscribe from a subscribed orderbook.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pairs</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – The pair(s) to unsubscribe from</p></li>
<li><p><strong>depth</strong> (<em>int</em>) – The book depth</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="kraken.spot.OrderbookClientV1">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kraken.spot.</span></span><span class="sig-name descname"><span class="pre">OrderbookClientV1</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">depth</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.spot.OrderbookClientV1" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p><strong>This client is using the Kraken Websocket API v1</strong></p>
<p>Please use <a class="reference internal" href="#kraken.spot.OrderbookClientV2" title="kraken.spot.OrderbookClientV2"><code class="xref py py-class docutils literal notranslate"><span class="pre">kraken.spot.OrderbookClientV2</span></code></a> to access the Kraken
Websocket API v2.</p>
<p>The orderbook client can be used for instantiation and maintaining one or
multiple orderbooks for Spot trading on the Kraken cryptocurrency exchange.
It connects to the websocket feed(s) and receives the book updates,
calculates the checksum and will publish the changes to the
<a class="reference internal" href="#kraken.spot.OrderbookClientV1.on_book_update" title="kraken.spot.OrderbookClientV1.on_book_update"><code class="xref py py-func docutils literal notranslate"><span class="pre">on_book_update()</span></code></a> function or to the specified callback
function.</p>
<p>The <a class="reference internal" href="#kraken.spot.OrderbookClientV1.get" title="kraken.spot.OrderbookClientV1.get"><code class="xref py py-func docutils literal notranslate"><span class="pre">get()</span></code></a> function can be used to access a specific
book of this client.</p>
<p>The client will resubscribe to the book feed(s) if any errors occur and
publish the changes to the mentioned function(s).</p>
<p>This class has a fixed book depth. Available depths are: {10, 25, 50, 100}</p>
<ul class="simple">
<li><p><a class="reference external" href="https://support.kraken.com/hc/en-us/articles/360027821131-WebSocket-API-v1-How-to-maintain-a-valid-order-book">https://support.kraken.com/hc/en-us/articles/360027821131-WebSocket-API-v1-How-to-maintain-a-valid-order-book</a></p></li>
<li><p><a class="reference external" href="https://docs.kraken.com/websockets/#book-checksum">https://docs.kraken.com/websockets/#book-checksum</a></p></li>
</ul>
<div class="literal-block-wrapper docutils container" id="id26">
<div class="code-block-caption"><span class="caption-text">Example: Create and maintain a Spot orderbook as custom class</span><a class="headerlink" href="#id26" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">kraken.spot</span> <span class="kn">import</span> <span class="n">OrderbookClientV1</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="k">class</span> <span class="nc">OrderBook</span><span class="p">(</span><span class="n">OrderbookClientV1</span><span class="p">):</span>
<span class="linenos"> 6</span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">on_book_update</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="s2">&quot;OrderBook&quot;</span><span class="p">,</span> <span class="n">pair</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 7</span><span class="w">        </span><span class="sd">&#39;&#39;&#39;This function must be overloaded to get the recent</span>
<span class="linenos"> 8</span><span class="sd">        updates.&#39;&#39;&#39;</span> <span class="n">book</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pair</span><span class="o">=</span><span class="n">pair</span><span class="p">)</span> <span class="n">bid</span><span class="p">:</span>
<span class="linenos"> 9</span>        <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">book</span><span class="p">[</span><span class="s2">&quot;bid&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">())</span> <span class="n">ask</span><span class="p">:</span>
<span class="linenos">10</span>        <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">book</span><span class="p">[</span><span class="s2">&quot;ask&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="linenos">11</span>
<span class="linenos">12</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Bid         Volume                Ask         Volume&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">level</span> <span class="ow">in</span>
<span class="linenos">13</span>        <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">depth</span><span class="p">):</span>
<span class="linenos">14</span>            <span class="nb">print</span><span class="p">(</span>
<span class="linenos">15</span>                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">bid</span><span class="p">[</span><span class="n">level</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">bid</span><span class="p">[</span><span class="n">level</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">)      </span><span class="si">{</span><span class="n">ask</span><span class="p">[</span><span class="n">level</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span>
<span class="linenos">16</span>                <span class="p">({</span><span class="n">ask</span><span class="p">[</span><span class="n">level</span><span class="p">][</span><span class="mi">1</span><span class="p">]})</span><span class="s2">&quot;</span>
<span class="linenos">17</span>            <span class="p">)</span>
<span class="linenos">18</span>
<span class="linenos">19</span><span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">20</span>    <span class="n">orderbook</span><span class="p">:</span> <span class="n">OrderBook</span> <span class="o">=</span> <span class="n">OrderBook</span><span class="p">(</span><span class="n">depth</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span> <span class="k">await</span> <span class="n">orderbook</span><span class="o">.</span><span class="n">add_book</span><span class="p">(</span>
<span class="linenos">21</span>        <span class="n">pairs</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;XBT/USD&quot;</span><span class="p">]</span>  <span class="c1"># we can also subscribe to more currency</span>
<span class="linenos">22</span>        <span class="n">pairs</span>
<span class="linenos">23</span>    <span class="p">)</span>
<span class="linenos">24</span>
<span class="linenos">25</span>    <span class="k">while</span> <span class="ow">not</span> <span class="n">orderbook</span><span class="o">.</span><span class="n">exception_occur</span><span class="p">:</span>
<span class="linenos">26</span>        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="linenos">27</span>
<span class="linenos">28</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="linenos">29</span>    <span class="k">try</span><span class="p">:</span>
<span class="linenos">30</span>        <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
<span class="linenos">31</span>    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
<span class="linenos">32</span>        <span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id27">
<div class="code-block-caption"><span class="caption-text">Example: Create and maintain a Spot orderbook using a callback</span><a class="headerlink" href="#id27" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">kraken.spot</span> <span class="kn">import</span> <span class="n">OrderbookClientV1</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="c1"># … use the Orderbook class defined in the example before</span>
<span class="linenos"> 6</span><span class="k">async</span> <span class="k">def</span> <span class="nf">my_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="s2">&quot;OrderBook&quot;</span><span class="p">,</span> <span class="n">pair</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 7</span><span class="w">    </span><span class="sd">&#39;&#39;&#39;This function do not need to be async.&#39;&#39;&#39;</span> <span class="nb">print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">10</span>    <span class="n">orderbook</span><span class="p">:</span> <span class="n">OrderBook</span> <span class="o">=</span> <span class="n">OrderBook</span><span class="p">(</span><span class="n">depth</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">my_callback</span><span class="p">)</span>
<span class="linenos">11</span>    <span class="k">await</span> <span class="n">orderbook</span><span class="o">.</span><span class="n">add_book</span><span class="p">(</span>
<span class="linenos">12</span>        <span class="n">pairs</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;XBT/USD&quot;</span><span class="p">]</span>  <span class="c1"># we can also subscribe to more currency</span>
<span class="linenos">13</span>        <span class="n">pairs</span>
<span class="linenos">14</span>    <span class="p">)</span>
<span class="linenos">15</span>
<span class="linenos">16</span>    <span class="k">while</span> <span class="ow">not</span> <span class="n">orderbook</span><span class="o">.</span><span class="n">exception_occur</span><span class="p">:</span>
<span class="linenos">17</span>        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="linenos">18</span>
<span class="linenos">19</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="linenos">20</span>    <span class="k">try</span><span class="p">:</span>
<span class="linenos">21</span>        <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
<span class="linenos">22</span>    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
<span class="linenos">23</span>        <span class="k">pass</span>
</pre></div>
</div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="kraken.spot.OrderbookClientV1.add_book">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_book</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pairs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#kraken.spot.OrderbookClientV1.add_book" title="Link to this definition"></a></dt>
<dd><p>Add an orderbook to this client. The feed will be subscribed and updates
will be published to the <a class="reference internal" href="#kraken.spot.OrderbookClientV1.on_book_update" title="kraken.spot.OrderbookClientV1.on_book_update"><code class="xref py py-func docutils literal notranslate"><span class="pre">on_book_update()</span></code></a> function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pairs</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – The pair(s) to subscribe to</p></li>
<li><p><strong>depth</strong> (<em>int</em>) – The book depth</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="kraken.spot.OrderbookClientV1.depth">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">depth</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#kraken.spot.OrderbookClientV1.depth" title="Link to this definition"></a></dt>
<dd><p>Return the fixed depth of this orderbook client.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="kraken.spot.OrderbookClientV1.exception_occur">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">exception_occur</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#kraken.spot.OrderbookClientV1.exception_occur" title="Link to this definition"></a></dt>
<dd><p>Can be used to determine if any critical error occurred within the
websocket connection. If so, the function will return <code class="docutils literal notranslate"><span class="pre">True</span></code> and the
client instance is most likely not usable anymore. So this is the
switch lets the user know, when to delete the current one and create a
new one.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if any critical error occurred else <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.spot.OrderbookClientV1.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pair</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#kraken.spot.OrderbookClientV1.get" title="Link to this definition"></a></dt>
<dd><p>Returns the orderbook for a specific <code class="docutils literal notranslate"><span class="pre">pair</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>pair</strong> (<em>str</em>) – The pair to get the orderbook from</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The orderbook of that <code class="docutils literal notranslate"><span class="pre">pair</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
<div class="literal-block-wrapper docutils container" id="id28">
<div class="code-block-caption"><span class="caption-text">OrderbookClientV1: Get ask and bid</span><a class="headerlink" href="#id28" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1"># …</span>
<span class="linenos"> 2</span><span class="k">class</span> <span class="nc">Orderbook</span><span class="p">(</span><span class="n">OrderbookClientV1</span><span class="p">):</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">on_book_update</span><span class="p">(</span>
<span class="linenos"> 5</span>        <span class="bp">self</span><span class="p">:</span> <span class="s2">&quot;Orderbook&quot;</span><span class="p">,</span>
<span class="linenos"> 6</span>        <span class="n">pair</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="linenos"> 7</span>        <span class="n">message</span><span class="p">:</span> <span class="nb">list</span>
<span class="linenos"> 8</span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 9</span>        <span class="n">book</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pair</span><span class="o">=</span><span class="s2">&quot;XBT/USD&quot;</span><span class="p">)</span>
<span class="linenos">10</span>        <span class="n">ask</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">book</span><span class="p">[</span><span class="s2">&quot;ask&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="linenos">11</span>        <span class="n">bid</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">book</span><span class="p">[</span><span class="s2">&quot;bid&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="linenos">12</span>        <span class="c1"># ask and bid are now in format [price, (volume, timestamp)]</span>
<span class="linenos">13</span>        <span class="c1"># … and include the whole orderbook</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.spot.OrderbookClientV1.get_first">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_first</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="headerlink" href="#kraken.spot.OrderbookClientV1.get_first" title="Link to this definition"></a></dt>
<dd><p>This function is used as callback for the <code class="docutils literal notranslate"><span class="pre">sorted</span></code> method to sort a
tuple/list by its first value and while ensuring that the values are
floats and comparable.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>values</strong> (<em>tuple</em>) – A tuple of string values</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The first value of <code class="docutils literal notranslate"><span class="pre">values</span></code> as float.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.spot.OrderbookClientV1.on_book_update">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">on_book_update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pair</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#kraken.spot.OrderbookClientV1.on_book_update" title="Link to this definition"></a></dt>
<dd><p>This function will be called every time the orderbook gets updated. It
needs to be overloaded if no callback function was defined during the
instantiation of this class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pair</strong> (<em>str</em>) – The currency pair of the orderbook that has been updated.</p></li>
<li><p><strong>message</strong> (<em>str</em>) – The message sent by Kraken causing the orderbook to
update.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.spot.OrderbookClientV1.on_message">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">on_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#kraken.spot.OrderbookClientV1.on_message" title="Link to this definition"></a></dt>
<dd><p><em>This function should not be overloaded - this would break this client!</em></p>
<p>It receives and processes the book related websocket messages and is
only publicly visible for those who understand and are willing to mock
it.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.spot.OrderbookClientV1.remove_book">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">remove_book</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pairs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#kraken.spot.OrderbookClientV1.remove_book" title="Link to this definition"></a></dt>
<dd><p>Unsubscribe from a subscribed orderbook.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pairs</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – The pair(s) to unsubscribe from</p></li>
<li><p><strong>depth</strong> (<em>int</em>) – The book depth</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="rest.html" class="btn btn-neutral float-left" title="Spot REST" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../futures/rest.html" class="btn btn-neutral float-right" title="Futures REST" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Benjamin Thomas Schwertfeger.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>